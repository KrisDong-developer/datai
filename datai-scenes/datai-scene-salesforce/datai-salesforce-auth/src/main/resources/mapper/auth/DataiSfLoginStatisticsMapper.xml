<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.datai.auth.mapper.DataiSfLoginStatisticsMapper">
    
    <resultMap type="DataiSfLoginStatistics" id="DataiSfLoginStatisticsResult">
        <result property="statId" column="stat_id" />
        <result property="tenantId" column="tenant_id" />
        <result property="statDate" column="stat_date" />
        <result property="statHour" column="stat_hour" />
        <result property="loginType" column="login_type" />
        <result property="successCount" column="success_count" />
        <result property="failedCount" column="failed_count" />
        <result property="refreshCount" column="refresh_count" />
        <result property="revokeCount" column="revoke_count" />
        <result property="createBy" column="create_by" />
        <result property="createTime" column="create_time" />
        <result property="updateBy" column="update_by" />
        <result property="updateTime" column="update_time" />
    </resultMap>

    <sql id="selectDataiSfLoginStatisticsVo">
        select 
            dsls.stat_id,
            dsls.tenant_id,
            dsls.stat_date,
            dsls.stat_hour,
            dsls.login_type,
            dsls.success_count,
            dsls.failed_count,
            dsls.refresh_count,
            dsls.revoke_count,
            dsls.create_by,
            dsls.create_time,
            dsls.update_by,
            dsls.update_time
        from datai_sf_login_statistics dsls
    </sql>

    <select id="selectDataiSfLoginStatisticsList" parameterType="DataiSfLoginStatistics" resultMap="DataiSfLoginStatisticsResult">
        <include refid="selectDataiSfLoginStatisticsVo"/>
        <where>
            <if test="tenantId != null  and tenantId != ''"> and dsls.tenant_id = #{tenantId}</if>
            <if test="statDate != null "> and dsls.stat_date = #{statDate}</if>
            <if test="statHour != null "> and dsls.stat_hour = #{statHour}</if>
            <if test="loginType != null  and loginType != ''"> and dsls.login_type = #{loginType}</if>
            <if test="successCount != null "> and dsls.success_count = #{successCount}</if>
            <if test="failedCount != null "> and dsls.failed_count = #{failedCount}</if>
            <if test="refreshCount != null "> and dsls.refresh_count = #{refreshCount}</if>
            <if test="revokeCount != null "> and dsls.revoke_count = #{revokeCount}</if>
        </where>
    </select>
    
    <select id="selectDataiSfLoginStatisticsByStatId" parameterType="Long" resultMap="DataiSfLoginStatisticsResult">
        <include refid="selectDataiSfLoginStatisticsVo"/>
        where dsls.stat_id = #{statId}
    </select>
        
    <insert id="insertDataiSfLoginStatistics" parameterType="DataiSfLoginStatistics" useGeneratedKeys="true" keyProperty="statId">
        insert into datai_sf_login_statistics
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="tenantId != null">tenant_id,</if>
            <if test="statDate != null">stat_date,</if>
            <if test="statHour != null">stat_hour,</if>
            <if test="loginType != null and loginType != ''">login_type,</if>
            <if test="successCount != null">success_count,</if>
            <if test="failedCount != null">failed_count,</if>
            <if test="refreshCount != null">refresh_count,</if>
            <if test="revokeCount != null">revoke_count,</if>
            <if test="createBy != null">create_by,</if>
            <if test="createTime != null">create_time,</if>
            <if test="updateBy != null">update_by,</if>
            <if test="updateTime != null">update_time,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="tenantId != null">#{tenantId},</if>
            <if test="statDate != null">#{statDate},</if>
            <if test="statHour != null">#{statHour},</if>
            <if test="loginType != null and loginType != ''">#{loginType},</if>
            <if test="successCount != null">#{successCount},</if>
            <if test="failedCount != null">#{failedCount},</if>
            <if test="refreshCount != null">#{refreshCount},</if>
            <if test="revokeCount != null">#{revokeCount},</if>
            <if test="createBy != null">#{createBy},</if>
            <if test="createTime != null">#{createTime},</if>
            <if test="updateBy != null">#{updateBy},</if>
            <if test="updateTime != null">#{updateTime},</if>
         </trim>
    </insert>

    <update id="updateDataiSfLoginStatistics" parameterType="DataiSfLoginStatistics">
        update datai_sf_login_statistics
        <trim prefix="SET" suffixOverrides=",">
            <if test="tenantId != null">tenant_id = #{tenantId},</if>
            <if test="statDate != null">stat_date = #{statDate},</if>
            <if test="statHour != null">stat_hour = #{statHour},</if>
            <if test="loginType != null and loginType != ''">login_type = #{loginType},</if>
            <if test="successCount != null">success_count = #{successCount},</if>
            <if test="failedCount != null">failed_count = #{failedCount},</if>
            <if test="refreshCount != null">refresh_count = #{refreshCount},</if>
            <if test="revokeCount != null">revoke_count = #{revokeCount},</if>
            <if test="createBy != null">create_by = #{createBy},</if>
            <if test="createTime != null">create_time = #{createTime},</if>
            <if test="updateBy != null">update_by = #{updateBy},</if>
            <if test="updateTime != null">update_time = #{updateTime},</if>
        </trim>
        where datai_sf_login_statistics.stat_id = #{statId}
    </update>

    <delete id="deleteDataiSfLoginStatisticsByStatId" parameterType="Long">
        delete from datai_sf_login_statistics where stat_id = #{statId}
    </delete>

    <delete id="deleteDataiSfLoginStatisticsByStatIds" parameterType="String">
        delete from datai_sf_login_statistics where stat_id in 
        <foreach item="statId" collection="array" open="(" separator="," close=")">
            #{statId}
        </foreach>
    </delete>
</mapper>