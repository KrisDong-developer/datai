# 清空定时任务调度日志

## 接口信息

- **接口名称**: 清空定时任务调度日志
- **接口路径**: /monitor/jobLog/clean
- **请求方法**: DELETE
- **模块归属**: 定时任务日志管理
- **版本号**: v1.0
- **创建日期**: 2026-01-13
- **最后更新**: 2026-01-13

## 功能描述

清空所有定时任务调度日志。该接口用于一次性清除所有任务执行记录，通常用于系统维护或日志清理场景。

## 权限要求

- **权限标识**: monitor:job:remove
- **权限说明**: 需要定时任务删除权限

## 请求参数

### 路径参数

无路径参数

### 请求示例

```
DELETE /monitor/jobLog/clean
```

## 响应数据

### 成功响应

**HTTP 状态码**: 200 OK

```json
{
  "code": 200,
  "msg": "操作成功",
  "data": null
}
```

### 失败响应

**HTTP 状态码**: 401 Unauthorized

```json
{
  "code": 401,
  "msg": "您没有权限执行该操作",
  "data": null
}
```

**HTTP 状态码**: 500 Internal Server Error

```json
{
  "code": 500,
  "msg": "清空失败",
  "data": null
}
```

## 响应参数说明

| 参数名 | 类型 | 描述 |
|--------|------|------|
| code | Integer | 响应状态码，200表示成功 |
| msg | String | 响应消息 |
| data | Object | 响应数据，清空操作通常为null |

## 错误码说明

| 错误码 | 说明 | 处理建议 |
|--------|------|----------|
| 200 | 清空成功 | 无需处理 |
| 401 | 未授权 | 检查用户权限 |
| 500 | 服务器内部错误 | 联系管理员或检查日志 |

## 业务规则

1. 清空操作会删除所有日志记录，不可恢复
2. 清空操作会记录操作日志
3. 清空前建议先导出重要日志数据
4. 清空操作通常用于系统维护或测试环境

## 实现细节

### 核心代码

```java
@PreAuthorize("@ss.hasPermi('monitor:job:remove')")
@Log(title = "调度日志", businessType = BusinessType.CLEAN)
@DeleteMapping("/clean")
public AjaxResult clean()
{
    jobLogService.cleanJobLog();
    return success();
}
```

### 业务逻辑

1. **权限验证**: 使用 `@PreAuthorize` 注解验证用户是否具有 `monitor:job:remove` 权限
2. **日志记录**: 使用 `@Log` 注解记录清空操作，业务类型为 `BusinessType.CLEAN`
3. **清空操作**: 调用 `ISysJobLogService.cleanJobLog()` 方法执行清空
4. **结果返回**: 使用 `success()` 方法返回成功响应

### 相关服务

- **ISysJobLogService**: 定时任务日志服务接口
  - `cleanJobLog()`: 清空所有任务调度日志

## 使用场景

1. **系统维护**: 定期清空历史日志，释放数据库空间
2. **测试环境**: 清空测试环境中的所有日志数据
3. **数据重置**: 在系统升级或数据迁移后清空旧日志
4. **隐私保护**: 清除包含敏感信息的日志记录

## 注意事项

1. 清空操作不可逆，请谨慎操作
2. 清空前建议先导出需要保留的日志数据
3. 清空操作会影响历史数据的追溯
4. 建议在业务低峰期执行清空操作
5. 清空操作会记录在系统日志中，便于审计追踪

## 安全建议

1. 建议限制该接口的访问权限，仅授权给管理员
2. 可以考虑添加二次确认机制，防止误操作
3. 建议记录清空操作的详细信息，包括操作人、操作时间等
4. 可以考虑设置清空操作的频率限制，避免频繁清空

## 相关接口

- [查询定时任务调度日志列表](./0001-job-log-list.md)
- [导出定时任务调度日志](./0002-export-job-log.md)
- [根据调度编号获取详细信息](./0003-get-info.md)
- [删除定时任务调度日志](./0004-remove-job-log.md)

## 更新记录

| 版本号 | 更新日期 | 更新内容 | 更新人 |
|--------|----------|----------|--------|
| v1.0 | 2026-01-13 | 初始版本创建 | AI Assistant |
