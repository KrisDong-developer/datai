# Salesforce配置管理模块 - 页面按钮布局设计方案

## 1. 页面布局总览

### 1.1 主菜单结构

```
Salesforce配置管理
├── 配置管理
│   ├── 配置列表
│   ├── 环境管理
│   ├── 版本管理
│   └── 审计日志
└── 快速操作
    ├── 刷新缓存
    ├── 切换环境
    └── 查看缓存状态
```

---

## 2. 配置管理页面按钮布局

### 2.1 页面顶部工具栏按钮

| 按钮名称 | 图标 | 位置 | API接口 | 权限标识 | 说明 |
|---------|------|------|---------|---------|------|
| 新增配置 | ➕ | 左侧 | POST /setting/configuration | setting:configuration:add | 打开新增配置对话框 |
| 批量删除 | 🗑️ | 左侧 | DELETE /setting/configuration/{ids} | setting:configuration:remove | 批量删除选中的配置项 |
| 导出配置 | 📥 | 左侧 | POST /setting/configuration/export | setting:configuration:export | 导出配置列表为Excel |
| 刷新缓存 | 🔄 | 右侧 | POST /setting/configuration/refresh | setting:configuration:refresh | 刷新配置缓存 |
| 缓存状态 | ℹ️ | 右侧 | GET /setting/configuration/cache | setting:configuration:cache | 查看缓存状态 |
| 查询 | 🔍 | 右侧 | GET /setting/configuration/list | setting:configuration:list | 根据查询条件搜索配置 |
| 重置 | ↺ | 右侧 | - | - | 重置查询条件 |

### 2.2 表格行操作按钮

| 按钮名称 | 图标 | 位置 | API接口 | 权限标识 | 说明 |
|---------|------|------|---------|---------|------|
| 查看 | 👁️ | 行内 | GET /setting/configuration/{id} | setting:configuration:query | 查看配置详情（只读） |
| 编辑 | ✏️ | 行内 | PUT /setting/configuration | setting:configuration:edit | 编辑配置信息 |
| 删除 | 🗑️ | 行内 | DELETE /setting/configuration/{ids} | setting:configuration:remove | 删除配置项 |

### 2.3 配置管理页面布局示意图

```
┌─────────────────────────────────────────────────────────────────┐
│ Salesforce配置管理 > 配置列表                                    │
├─────────────────────────────────────────────────────────────────┤
│  [➕新增] [🗑️批量删除] [📥导出]        [🔄刷新缓存] [ℹ️缓存状态]  │
├─────────────────────────────────────────────────────────────────┤
│ 查询条件:                                                         │
│ 配置键: [_______________] 配置值: [_______________]               │
│ 环境: [下拉选择_______] 激活状态: [下拉选择_______]               │
│ [🔍查询] [↺重置]                                                  │
├─────────────────────────────────────────────────────────────────┤
│ 序号 | 配置键 | 配置值 | 环境 | 敏感 | 加密 | 激活 | 操作        │
├─────┼───────┼───────┼─────┼─────┼─────┼─────┼─────────────┤
│  1  | sf.api| https | PROD|  否  |  否  |  是  | [👁️][✏️][🗑️]│
│  2  | sf.oauth| xxx  | DEV |  是  |  是  |  是  | [👁️][✏️][🗑️]│
│ ... | ...   | ...   | ... | ... | ... | ... | ...         │
└─────────────────────────────────────────────────────────────────┘
```

---

## 3. 环境管理页面按钮布局

### 3.1 页面顶部工具栏按钮

| 按钮名称 | 图标 | 位置 | API接口 | 权限标识 | 说明 |
|---------|------|------|---------|---------|------|
| 新增环境 | ➕ | 左侧 | POST /setting/environment | setting:environment:add | 打开新增环境对话框 |
| 批量删除 | 🗑️ | 左侧 | DELETE /setting/environment/{ids} | setting:environment:remove | 批量删除选中的环境 |
| 导出环境 | 📥 | 左侧 | POST /setting/environment/export | setting:environment:export | 导出环境列表为Excel |
| 切换环境 | 🔄 | 右侧 | POST /setting/environment/switch | setting:environment:switch | 切换当前激活环境 |
| 当前环境 | 📍 | 右侧 | GET /setting/environment/current | setting:environment:query | 显示当前激活环境 |
| 查询 | 🔍 | 右侧 | GET /setting/environment/list | setting:environment:list | 根据查询条件搜索环境 |
| 重置 | ↺ | 右侧 | - | - | 重置查询条件 |

### 3.2 表格行操作按钮

| 按钮名称 | 图标 | 位置 | API接口 | 权限标识 | 说明 |
|---------|------|------|---------|---------|------|
| 查看 | 👁️ | 行内 | GET /setting/environment/{id} | setting:environment:query | 查看环境详情（只读） |
| 编辑 | ✏️ | 行内 | PUT /setting/environment | setting:environment:edit | 编辑环境信息 |
| 删除 | 🗑️ | 行内 | DELETE /setting/environment/{ids} | setting:environment:remove | 删除环境 |
| 切换 | 🔄 | 行内 | POST /setting/environment/switch | setting:environment:switch | 切换到该环境 |

### 3.3 环境管理页面布局示意图

```
┌─────────────────────────────────────────────────────────────────┐
│ Salesforce配置管理 > 环境管理                                    │
├─────────────────────────────────────────────────────────────────┤
│  [➕新增] [🗑️批量删除] [📥导出]        [🔄切换环境] [📍当前环境]  │
├─────────────────────────────────────────────────────────────────┤
│ 查询条件:                                                         │
│ 环境名称: [_______________] 环境编码: [_______________]         │
│ 激活状态: [下拉选择_______]                                       │
│ [🔍查询] [↺重置]                                                  │
├─────────────────────────────────────────────────────────────────┤
│ 当前环境: 生产环境 (PROD) [🔄切换]                                │
├─────────────────────────────────────────────────────────────────┤
│ 序号 | 环境名称 | 环境编码 | 描述 | 激活 | 操作                │
├─────┼─────────┼─────────┼─────┼─────┼───────────────────────┤
│  1  | 开发环境 |  DEV    | ... |  是  | [👁️][✏️][🗑️][🔄]    │
│  2  | 测试环境 |  TEST   | ... |  是  | [👁️][✏️][🗑️][🔄]    │
│  3  | 生产环境 |  PROD   | ... |  是  | [👁️][✏️][🗑️][🔄]    │
│ ... | ...     | ...     | ... | ... | ...                    │
└─────────────────────────────────────────────────────────────────┘
```

---

## 4. 版本管理页面按钮布局

### 4.1 页面顶部工具栏按钮

| 按钮名称 | 图标 | 位置 | API接口 | 权限标识 | 说明 |
|---------|------|------|---------|---------|------|
| 创建版本 | ➕ | 左侧 | POST /setting/version | setting:version:add | 创建新版本并生成快照 |
| 批量删除 | 🗑️ | 左侧 | DELETE /setting/version/{ids} | setting:version:remove | 批量删除选中的版本 |
| 导出版本 | 📥 | 左侧 | POST /setting/version/export | setting:version:export | 导出版本列表为Excel |
| 查询 | 🔍 | 右侧 | GET /setting/version/list | setting:version:list | 根据查询条件搜索版本 |
| 重置 | ↺ | 右侧 | - | - | 重置查询条件 |

### 4.2 表格行操作按钮

| 按钮名称 | 图标 | 位置 | API接口 | 权限标识 | 说明 |
|---------|------|------|---------|---------|------|
| 查看 | 👁️ | 行内 | GET /setting/version/{id} | setting:version:query | 查看版本详情和快照内容 |
| 编辑 | ✏️ | 行内 | PUT /setting/version | setting:version:edit | 编辑版本描述 |
| 删除 | 🗑️ | 行内 | DELETE /setting/version/{ids} | setting:version:remove | 删除版本 |
| 发布 | 🚀 | 行内 | POST /setting/version/{id}/publish | setting:version:publish | 发布版本到生产环境 |
| 回滚 | ⏪ | 行内 | POST /setting/version/{id}/rollback | setting:version:rollback | 回滚到该版本 |

### 4.3 版本管理页面布局示意图

```
┌─────────────────────────────────────────────────────────────────┐
│ Salesforce配置管理 > 版本管理                                    │
├─────────────────────────────────────────────────────────────────┤
│  [➕创建版本] [🗑️批量删除] [📥导出]            [🔍查询] [↺重置]   │
├─────────────────────────────────────────────────────────────────┤
│ 查询条件:                                                         │
│ 版本号: [_______________] 版本状态: [下拉选择_______]             │
│ [🔍查询] [↺重置]                                                  │
├─────────────────────────────────────────────────────────────────┤
│ 序号 | 版本号 | 版本描述 | 状态 | 发布时间 | 操作                │
├─────┼───────┼─────────┼─────┼─────────┼───────────────────────┤
│  1  | v1.0.0| 首次发布 |已发布| 12-25   | [👁️][✏️][🗑️][⏪]    │
│  2  | v1.1.0| 新增功能 |已创建| -       | [👁️][✏️][🗑️][🚀]    │
│  3  | v1.2.0| 修复bug |已发布| 12-26   | [👁️][✏️][🗑️][⏪]    │
│ ... | ...   | ...     | ... | ...     | ...                    │
└─────────────────────────────────────────────────────────────────┘
```

---

## 5. 审计日志页面按钮布局

### 5.1 页面顶部工具栏按钮

| 按钮名称 | 图标 | 位置 | API接口 | 权限标识 | 说明 |
|---------|------|------|---------|---------|------|
| 导出日志 | 📥 | 左侧 | POST /setting/log/export | setting:log:export | 导出审计日志为Excel |
| 查询 | 🔍 | 右侧 | GET /setting/log/list | setting:log:list | 根据查询条件搜索日志 |
| 重置 | ↺ | 右侧 | - | - | 重置查询条件 |

### 5.2 表格行操作按钮

| 按钮名称 | 图标 | 位置 | API接口 | 权限标识 | 说明 |
|---------|------|------|---------|---------|------|
| 查看详情 | 👁️ | 行内 | GET /setting/log/{id} | setting:log:query | 查看日志详细信息 |

**注意**：审计日志通常不允许修改和删除，以保证审计的完整性和可追溯性。

### 5.3 审计日志页面布局示意图

```
┌─────────────────────────────────────────────────────────────────┐
│ Salesforce配置管理 > 审计日志                                    │
├─────────────────────────────────────────────────────────────────┤
│  [📥导出日志]                          [🔍查询] [↺重置]         │
├─────────────────────────────────────────────────────────────────┤
│ 查询条件:                                                         │
│ 操作类型: [下拉选择_______] 操作人: [_______________]             │
│ 对象类型: [下拉选择_______] 时间范围: [______] 至 [______]       │
│ [🔍查询] [↺重置]                                                  │
├─────────────────────────────────────────────────────────────────┤
│ 序号 | 操作类型 | 对象 | 操作人 | 操作时间 | 结果 | 操作          │
├─────┼─────────┼─────┼───────┼─────────┼─────┼───────────────┤
│  1  |  新增   | 配置 | admin | 12-26   | 成功 | [👁️查看详情]  │
│  2  |  修改   | 配置 | admin | 12-26   | 成功 | [👁️查看详情]  │
│  3  |  发布   | 版本 | admin | 12-25   | 成功 | [👁️查看详情]  │
│  4  |  回滚   | 版本 | admin | 12-25   | 成功 | [👁️查看详情]  │
│ ... | ...     | ... | ...   | ...     | ... | ...           │
└─────────────────────────────────────────────────────────────────┘
```

---

## 6. 快速操作面板

### 6.1 快速操作按钮

在主页面或侧边栏提供快速操作入口，方便用户快速执行常用操作。

| 按钮名称 | 图标 | API接口 | 权限标识 | 说明 |
|---------|------|---------|---------|------|
| 刷新配置缓存 | 🔄 | POST /setting/configuration/refresh | setting:configuration:refresh | 快速刷新配置缓存 |
| 切换环境 | 🔄 | POST /setting/environment/switch | setting:environment:switch | 快速切换环境 |
| 查看缓存状态 | ℹ️ | GET /setting/configuration/cache | setting:configuration:cache | 查看缓存状态 |
| 创建版本快照 | 📸 | POST /setting/version | setting:version:add | 快速创建版本快照 |

### 6.2 快速操作面板布局

```
┌─────────────────────────────────────────────────────────────────┐
│ 快速操作                                                         │
├─────────────────────────────────────────────────────────────────┤
│  [🔄刷新配置缓存] [🔄切换环境] [ℹ️查看缓存状态] [📸创建版本快照]  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 7. 对话框按钮布局

### 7.1 新增/编辑配置对话框

```
┌─────────────────────────────────────────────────────────────────┐
│ 新增配置                                                         │
├─────────────────────────────────────────────────────────────────┤
│ 配置键: [_____________________________] *                        │
│ 配置值: [_____________________________] *                        │
│ 环境:   [下拉选择___________________] *                         │
│ 敏感配置: [☑]  加密存储: [☑]                                    │
│ 激活状态: [☑]                                                   │
│ 配置描述: [_____________________________________]               │
│                      [取消]  [确定]                             │
└─────────────────────────────────────────────────────────────────┘
```

### 7.2 切换环境对话框

```
┌─────────────────────────────────────────────────────────────────┐
│ 切换环境                                                         │
├─────────────────────────────────────────────────────────────────┤
│ 当前环境: 生产环境 (PROD)                                        │
│ 目标环境: [下拉选择___________________] *                         │
│ 切换原因: [_____________________________________]               │
│                      [取消]  [确定]                             │
└─────────────────────────────────────────────────────────────────┘
```

### 7.3 发布版本对话框

```
┌─────────────────────────────────────────────────────────────────┐
│ 发布版本                                                         │
├─────────────────────────────────────────────────────────────────┤
│ 版本号: v1.1.0                                                   │
│ 版本描述: 新增OAuth2登录功能                                     │
│ 快照内容: [查看详情]                                             │
│ 警告: 发布后将覆盖当前生产环境配置，请确认操作！                  │
│                      [取消]  [发布]                             │
└─────────────────────────────────────────────────────────────────┘
```

### 7.4 回滚版本对话框

```
┌─────────────────────────────────────────────────────────────────┐
│ 回滚版本                                                         │
├─────────────────────────────────────────────────────────────────┤
│ 目标版本: v1.0.0                                                 │
│ 版本描述: 首次发布版本                                           │
│ 发布时间: 2025-12-25 10:00:00                                   │
│ 快照内容: [查看详情]                                             │
│ 警告: 回滚将恢复到该版本的配置，当前配置将被覆盖，请确认操作！    │
│                      [取消]  [回滚]                             │
└─────────────────────────────────────────────────────────────────┘
```

---

## 8. 按钮权限控制说明

### 8.1 权限标识列表

| 权限标识 | 说明 | 对应按钮 |
|---------|------|---------|
| setting:configuration:list | 查询配置列表 | 查询按钮 |
| setting:configuration:add | 新增配置 | 新增配置按钮 |
| setting:configuration:edit | 修改配置 | 编辑按钮 |
| setting:configuration:remove | 删除配置 | 删除按钮 |
| setting:configuration:export | 导出配置 | 导出配置按钮 |
| setting:configuration:refresh | 刷新配置缓存 | 刷新缓存按钮 |
| setting:configuration:cache | 查询缓存状态 | 缓存状态按钮 |
| setting:environment:list | 查询环境列表 | 查询按钮 |
| setting:environment:add | 新增环境 | 新增环境按钮 |
| setting:environment:edit | 修改环境 | 编辑按钮 |
| setting:environment:remove | 删除环境 | 删除按钮 |
| setting:environment:export | 导出环境 | 导出环境按钮 |
| setting:environment:switch | 切换环境 | 切换环境按钮 |
| setting:version:list | 查询版本列表 | 查询按钮 |
| setting:version:add | 创建版本 | 创建版本按钮 |
| setting:version:edit | 修改版本 | 编辑按钮 |
| setting:version:remove | 删除版本 | 删除按钮 |
| setting:version:export | 导出版本 | 导出版本按钮 |
| setting:version:publish | 发布版本 | 发布按钮 |
| setting:version:rollback | 回滚版本 | 回滚按钮 |
| setting:log:list | 查询审计日志 | 查询按钮 |
| setting:log:export | 导出审计日志 | 导出日志按钮 |

### 8.2 按钮显示逻辑

1. **基于权限控制**：根据用户权限动态显示/隐藏按钮
2. **基于数据状态控制**：
   - 已发布的版本显示"回滚"按钮，未发布的版本显示"发布"按钮
   - 激活的环境显示"切换"按钮，非激活环境不显示
3. **基于操作权限控制**：
   - 审计日志页面不显示"新增"、"编辑"、"删除"按钮
   - 敏感配置需要特殊权限才能查看和编辑

---

## 9. 按钮交互说明

### 9.1 按钮交互流程

**新增配置**：
1. 点击"新增配置"按钮
2. 弹出新增配置对话框
3. 填写配置信息
4. 点击"确定"提交
5. 刷新配置列表
6. 显示成功提示

**编辑配置**：
1. 点击表格行的"编辑"按钮
2. 弹出编辑配置对话框（预填充数据）
3. 修改配置信息
4. 点击"确定"提交
5. 刷新配置列表
6. 显示成功提示

**删除配置**：
1. 选中要删除的配置项（支持多选）
2. 点击"批量删除"按钮
3. 弹出确认对话框
4. 点击"确定"删除
5. 刷新配置列表
6. 显示成功提示

**切换环境**：
1. 点击"切换环境"按钮
2. 弹出切换环境对话框
3. 选择目标环境
4. 填写切换原因（可选）
5. 点击"确定"切换
6. 刷新页面
7. 显示当前环境

**发布版本**：
1. 点击表格行的"发布"按钮
2. 弹出发布版本对话框
3. 查看版本信息
4. 点击"发布"确认
5. 刷新版本列表
6. 显示成功提示

**回滚版本**：
1. 点击表格行的"回滚"按钮
2. 弹出回滚版本对话框
3. 查看版本信息
4. 点击"回滚"确认
5. 刷新版本列表
6. 显示成功提示

### 9.2 按钮状态反馈

1. **加载状态**：按钮点击后显示加载动画，防止重复提交
2. **成功提示**：操作成功后显示成功提示消息
3. **错误提示**：操作失败后显示错误提示消息
4. **禁用状态**：根据权限或数据状态禁用按钮

---

## 10. 响应式布局建议

### 10.1 桌面端布局

- 工具栏按钮横向排列
- 表格行操作按钮横向排列
- 对话框宽度适中（600-800px）

### 10.2 平板端布局

- 工具栏按钮分两行排列
- 表格行操作按钮横向排列
- 对话框宽度适中（500-600px）

### 10.3 移动端布局

- 工具栏按钮使用下拉菜单
- 表格行操作按钮使用下拉菜单
- 对话框全屏显示

---

## 11. 总结

本设计方案为 Salesforce 配置管理模块提供了完整的页面按钮布局，包括：

1. **配置管理页面**：提供配置的增删改查、导出、缓存刷新等功能
2. **环境管理页面**：提供环境的增删改查、切换、导出等功能
3. **版本管理页面**：提供版本的创建、发布、回滚、导出等功能
4. **审计日志页面**：提供日志的查询、导出、详情查看等功能
5. **快速操作面板**：提供常用操作的快速入口
6. **对话框布局**：提供各类操作的对话框布局
7. **权限控制**：基于权限标识控制按钮的显示/隐藏
8. **交互说明**：提供按钮交互流程和状态反馈

通过本设计方案，可以构建一个功能完善、用户体验良好的配置管理界面。

---

**文档更新时间**：2025-12-26
**文档版本**：1.0
**文档作者**：TraeAI
**所属模块**：datai-salesforce-setting
