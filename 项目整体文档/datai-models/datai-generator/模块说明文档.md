# datai-generator 模块说明文档

## 1. 模块概述

datai-generator 是代码生成模块，负责根据数据库表结构自动生成标准的增删改查代码，包括实体类、Mapper接口、Service层、Controller层以及前端页面等。该模块采用Velocity模板引擎，通过预定义的模板快速生成高质量、规范化的代码，显著提高开发效率，减少重复性工作。

## 2. 核心功能

| 功能类别 | 功能名称 | 功能描述 |
|---------|---------|---------|
| 代码生成 | 表结构导入 | 从数据库导入表结构信息，包括字段、类型、注释等 |
| 代码生成 | 模板生成 | 基于Velocity模板引擎生成实体类、Mapper、Service、Controller等代码 |
| 代码生成 | 代码预览 | 提供生成代码的预览功能，支持查看即将生成的代码内容 |
| 代码生成 | 代码下载 | 支持将生成的代码打包为ZIP文件下载 |
| 代码生成 | 批量生成 | 支持选择多张表进行批量代码生成 |
| 配置管理 | 生成配置 | 提供代码生成参数配置，如包名、模块名、作者等 |
| 配置管理 | 模板管理 | 支持自定义代码生成模板，满足不同项目需求 |
| 表同步 | 结构同步 | 同步数据库表结构变更，更新生成配置 |

## 3. 模块架构

datai-generator 模块采用分层架构设计，主要包含以下层次：

- **控制层(Controller)**: 提供RESTful API接口，处理代码生成相关的HTTP请求
- **服务层(Service)**: 实现代码生成的核心业务逻辑，包括表信息处理、代码生成等
- **数据访问层(Mapper)**: 负责与数据库交互，获取表结构信息和保存生成配置
- **工具层(Util)**: 提供代码生成所需的工具类，如模板处理、类型转换等
- **领域模型层(Domain)**: 定义代码生成相关的实体类，如GenTable、GenColumn等

## 4. 主要依赖

| 依赖名称 | 依赖说明 | 用途 |
|---------|---------|------|
| datai-common | 通用工具模块 | 提供基础工具类、常量和通用功能 |
| velocity-engine-core | Velocity模板引擎 | 用于代码模板渲染和生成 |
| druid-spring-boot-3-starter | 阿里数据库连接池 | 提供数据库连接和表结构查询功能 |

## 5. 关键特性

1. **智能表结构分析**: 自动分析数据库表结构，识别主键、字段类型、注释等信息
2. **灵活模板配置**: 支持自定义Velocity模板，满足不同代码风格需求
3. **多表关联支持**: 支持主子表关联代码生成，处理一对多等复杂关系
4. **代码预览功能**: 生成前可预览代码，确保生成内容符合预期
5. **批量操作**: 支持多表同时生成，提高批量开发效率
6. **类型智能映射**: 自动将数据库字段类型映射为合适的Java类型
7. **命名规范转换**: 智能转换表名、字段名为符合Java规范的类名和属性名

## 6. 模块总结

datai-generator 作为代码生成模块，是整个DataI项目中提高开发效率的关键组件。它通过自动化生成标准化的代码结构，显著减少了开发人员的重复性工作，使团队能够更专注于业务逻辑的实现。模块采用Velocity模板引擎，提供了高度灵活的代码生成能力，支持各种自定义需求。同时，模块与datai-common等基础模块紧密集成，确保生成代码与项目整体架构保持一致。通过datai-generator，开发团队可以快速搭建标准化的CRUD功能，加速项目开发进程，保证代码质量和规范性。