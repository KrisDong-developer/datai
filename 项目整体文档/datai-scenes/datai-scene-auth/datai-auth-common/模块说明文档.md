# datai-auth-common 模块说明文档

## 模块概述

datai-auth-common 是 datai-scene-auth 认证场景模块的公共基础组件，为整个认证体系提供核心数据模型、服务接口和工具类。该模块作为认证功能的基础支撑，为其他认证相关模块提供共享的实体类、服务接口和工具方法。

## 核心功能

### 1. OAuth 用户信息管理
提供第三方认证用户信息的完整数据模型和持久化能力，包括：
- OAuth 用户实体模型定义，包含用户ID、第三方来源、访问Seesion、刷新Seesion等核心属性
- OAuth 用户数据的数据库访问层接口，支持增删改查操作
- OAuth 用户业务服务接口，提供用户信息管理、唯一性校验等功能

### 2. 验证码服务接口
定义统一的验证码服务接口，支持多种验证用途：
- 验证码发送功能接口
- 验证码校验功能接口
- 支持登录、注册、禁用、重置、绑定等多种验证场景

### 3. 双因素认证(TFA)服务接口
提供完整的双因素认证服务接口定义，包括：
- TFA 注册流程处理接口
- TFA 登录流程处理接口
- TFA 绑定流程处理接口
- TFA 重置流程处理接口
- 各流程的验证步骤接口

### 4. 验证用途枚举
定义验证码使用场景的标准枚举类型，包括：
- 登录验证
- 注册验证
- 禁用验证
- 重置验证
- 绑定验证
- 其他用途验证

### 5. 工具类支持
提供认证相关的工具方法：
- 随机验证码生成工具，支持数字和字母组合
- 安全随机数生成，确保验证码的不可预测性

## 主要作用

1. **数据模型标准化**：为整个认证体系提供统一的数据模型定义，确保各模块间数据结构的一致性

2. **服务接口抽象**：定义认证相关服务的标准接口，为不同实现提供统一的规范

3. **公共功能复用**：提供可被多个认证模块复用的公共功能，减少代码重复

4. **扩展性支持**：通过接口和抽象类设计，支持认证功能的灵活扩展

## 关键特性

1. **模块化设计**：采用清晰的模块划分，职责明确，便于维护和扩展

2. **接口驱动**：通过接口定义核心功能，实现与具体实现的解耦

3. **多场景支持**：支持多种认证场景和验证用途，满足不同业务需求

4. **安全考虑**：使用安全随机数生成器，确保验证码的安全性

5. **依赖最小化**：仅依赖核心框架模块，保持轻量级特性

## 技术依赖

- datai-framework：核心框架模块，提供基础功能和通用组件

## 使用场景

datai-auth-common 主要服务于以下场景：
- 第三方OAuth认证的用户信息管理
- 验证码发送和验证流程
- 双因素认证的完整流程实现
- 认证相关的工具方法调用

该模块不直接实现具体功能，而是作为基础支撑，被其他认证模块（如 datai-oauth-justauth、datai-tfa-email 等）引用和扩展。